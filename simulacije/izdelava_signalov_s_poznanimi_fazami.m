%% podatki 
faza_r_ys=[...
  -89.7629   11.7347;
  -89.7308   11.1626;
  -89.7105   10.5887;
  -89.6817   10.0355;
  -89.6633    9.4630;
  -89.6473    8.8934;
  -89.6349    8.3204;
  -89.6220    7.7280;
  -89.6106    7.1434;
  -89.6051    6.5517;
  -89.6257    5.9745;
  -89.6439    5.3853;
  -89.6818    4.7938;
  -89.7109    4.2085;
  -89.7497    3.6160;
  -89.7884    3.0186;
  -89.8309    2.4307;
  -89.8637    1.8341;
  -89.8919    1.2413;
  -89.9217    0.6421;
  -89.9519    0.0510;
  -89.9772   -0.5483;
  -90.0243   -1.1457;
  -90.0187   -1.7397;
  -89.9759   -2.3418;
  -89.9775   -2.9304;
  -89.9743   -3.5305;
  -89.9732   -4.1235;
  -89.9710   -4.7205;
  -89.9617   -5.3114;
  -89.9518   -5.9111;
  -89.9318   -6.5046;
  -89.9237   -7.0989;
  -89.8954   -7.6801;
  -89.8614   -8.2607;
  -89.8332   -8.8602;
  -89.8060   -9.4458;
  -89.7776  -10.0269;
  -89.7586  -10.6167;
  -89.7525  -11.2123;
  -89.7410  -11.7828];

faza_r_xs=[ ... 
 -101.7990    0.2319;
 -101.2203    0.2681;
 -100.6454    0.2946;
 -100.0524    0.3122;
  -99.4578    0.3335;
  -98.8702    0.3580;
  -98.2798    0.3636;
  -97.7001    0.3779;
  -97.1077    0.3928;
  -96.5178    0.3955;
  -95.9275    0.3786;
  -95.3251    0.3502;
  -94.7253    0.3136;
  -94.1388    0.2888;
  -93.5368    0.2479;
  -92.9388    0.2102;
  -92.3420    0.1723;
  -91.7461    0.1349;
  -91.1483    0.1050;
  -90.5490    0.0774;
  -89.9519    0.0510;
  -89.3484    0.0230;
  -88.7564   -0.0233;
  -88.1620   -0.0211;
  -87.5641    0.0227;
  -86.9728    0.0249;
  -86.3792    0.0232;
  -85.7870    0.0299;
  -85.1984    0.0294;
  -84.6093    0.0380;
  -84.0157    0.0543;
  -83.4380    0.0661;
  -82.8447    0.0817;
  -82.2570    0.1090;
  -81.6683    0.1407;
  -81.0912    0.1656;
  -80.5163    0.1916;
  -79.9458    0.2216;
  -79.3844    0.2431;
  -78.8242    0.2481;
  -78.2441    0.2545];

  faza_m_ys=[ ...
  111.0155 -161.2640;
  110.7149 -160.9833;
  110.3968 -160.7148;
  110.3586 -160.7656;
  110.3048 -160.6683;
  110.3416 -160.7159;
  110.4234 -160.7924;
  110.3639 -160.7971;
  110.1985 -160.6818;
  110.0264 -160.5743;
  109.8667 -160.4684;
  109.7377 -160.4059;
  109.6815 -160.4124;
  109.6694 -160.3708;
  109.6214 -160.3133;
  109.5200 -160.2173;
  109.3482 -160.0408;
  108.9662 -159.7247;
  108.7263 -159.5769;
  108.6411 -159.5236;
  108.7860 -159.7083];



%% izdelava signalov




theta = linspace(0,360,10000);
clear faza sinus cosinus kot ref prot protokol sin_fft cos_fft

ref = [];


faza=faza_m_ys;
for i = 1:length(faza)
sinus(i,:) = cosd(theta+faza(i,1));
cosinus(i,:) = cosd(theta+faza(i,2));
kot(i,:) = atan2d(sinus(i,:),cosinus(i,:));
ref=[ref;theta];
prot = kot(i,:)-theta;
prot(prot>180) = prot(prot>180)-360;
prot(prot<-180) = prot(prot<-180)+360;
protokol(i,:)=prot;
end


sin_fft=mojfft(sinus);
cos_fft=mojfft(cosinus);




figure(3)
subplot(3,2,3)
plot(sin_fft{2}(:,2)-cos_fft{2}(:,2))
title('faza')
subplot(3,2,5)
plot(mean(protokol'))
title('mean prot')

subplot(3,2,1)
plot(sin_fft{2}(:,2)-90)
hold on
plot(cos_fft{2}(:,2)+180,'-r')
hold off
legend('sin','cos')
title('sprememba sin cos faze')

subplot(3,2,2)
plot(sinus')
title('sinus')
subplot(3,2,4)
plot(cosinus')
title('cosinus')
subplot(3,2,6)
plot(protokol([1,round(end/2),end],:)')
legend('1','mid','end')
